<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;700&family=Rancho&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="public/css/base.css">
  <link rel="stylesheet" href="public/css/main.css">
  <link rel="stylesheet" href="public/css/quer.css">

  <title>Argonautes 3.0</title>
</head>

<body>

  <!-- Modal -->
  <div class="modal fade" id="deleteModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">

        <div class="modal-header">
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>

        <div class="modal-body">
          Êtes-vous sûrs de vouloir supprimer l'élément <span class="delItemName fw-bold"></span> ?
        </div>

        <div class="modal-footer">

          <form action="index.php" method="POST" class="w-100">

            <input type="hidden" name="mod_form_delete" id="mod_form_delete" value="true">
            <input type="hidden" name="mod_form_mem_id" id="mod_form_mem_id" value="">

            <div class="d-flex justify-content-between">
              <button type="button" class="btn modal__btn btn-outline-dark" data-bs-dismiss="modal">Annuler</button>
              <button type="submit" class="btn modal__btn btn-outline-danger" data-bs-dismiss="modal">Supprimer</button>
            </div>
          </form>
        </div>

      </div>
    </div>
  </div>




  <!-- MK -- HEADER -->
  <header class="p-3">

    <div class="container">
      <h1>
        <img class="hero__icon" src="public/icons/helmet.png" alt="">
        <a class="link link-light text-decoration-none" href="index.php">Argonautes 3.0</a>
        <img class="hero__icon" src="public/icons/vessel.png" alt="">
      </h1>
    </div>

  </header>


  <!-- ####### MAIN ####### -->
  <main>

  <!--
    <section id="menu" class="my-3">
      <div class="container">
        <div class="row">
          <div class="col-6 text-center">
            <a class="btn btn-outline-dark btn-lg section__toggler" data-toggle="crew">Equipage</a>
          </div>
          <div class="col-6 text-center">
            <a class="btn btn-outline-dark btn-lg section__toggler" data-toggle="form">Formulaire</a>
          </div>
        </div>
      </div>
    </section>
  -->
    <section id="member" class="d-none">

      <div class="container">

        <!-- T*T -- FORM -->

        <form action="index.php" method="POST">

          <!-- A*A -- condition create/edit -->
          <?php
          if (isset($existingMember)) {
            $prefill_id = $existingMember['memId'];
            $prefill_name = $existingMember['memName'];
            $prefill_sign = $existingMember['memSign'];
            $prefill_icon = "public/icons/{$existingMember['memIcon']}";
            $prefill_navg = $existingMember['memNavg'];
            $prefill_comb = $existingMember['memComb'];
            $formMode = "Modification d'un membre existant";
          } else {
            $prefill_id = "";
            $prefill_name = "";
            $prefill_sign = "";
            $prefill_icon = "public/icons/ava_1.png";
            $prefill_navg = "1";
            $prefill_comb = "1";
            $formMode = "Création d'un nouveau membre";
          }
          ?>

          <h3 class="text-center"><?= $formMode ?></h3>

          <div class="row form__top mb-5 p-3">

            <input type="hidden" name="f_icon" id="p_icon" value="1">

            <!-- A*A -- AVATAR -->
            <div class="col-12 col-lg-6 form__top__avat">

              <div class="row">
                <div class="col-2 text-center d-flex justify-content-center align-items-center">
                  <i class="bi bi-caret-left fs-1 avat__arrow" data-arrow="left"></i>
                </div>

                <div class="col-8 text-center">
                  <img class="form__avat__img" src="<?= $prefill_icon ?>" alt="">
                </div>

                <div class="col-2 text-center d-flex justify-content-center align-items-center">
                  <i class="bi bi-caret-right fs-1 avat__arrow" data-arrow="right"></i>
                </div>

              </div>
            </div>






            <div class="col-12 col-lg-6 form__top__info">

              <!-- hidden input -->
              <input type="hidden" name="f_id" id="f_id" value="<?= $prefill_id ?>">

              <p>
                <label class="form-label" for="f_name">Nom</label>
                <input class="form-control" type="text" name="f_name" id="f_name" value="<?= $prefill_name ?>" required>
              </p>

              <p>
                <label class="form-label" for="f_sign">Signes particuliers</label>
                <input class="form-control" type="text" name="f_sign" id="f_sign" value="<?= $prefill_sign ?>">
              </p>

            </div>

          </div> <!-- end of .form__top -->


          <div class="row form__bottom mb-5 p-3">


            <!-- A*A -- NAVIGATION -->
            <div class="col-12 col-lg-6 form__bottom__navg">

              <div class="row">
                <div class="col-8">
                  <label for="f_navg">Navigation</label>
                  <input type="hidden" name="f_navg" id="f_navg" value="<?= $prefill_navg ?>">
                </div>

                <div class="col-4">
                  <i class="navg__btn bi bi-dash-square fs-3" data-navgbtn="mins"></i>
                  <i class="navg__btn bi bi-plus-square fs-3" data-navgbtn="plus"></i>
                </div>
              </div>

              <output class="navg__star__output"></output>

            </div>

            <!-- A*A -- COMBAT -->
            <div class="col-12 col-lg-6 form__bottom__comb">

              <div class="row">
                <div class="col-8">
                  <label for="f_comb">Combat</label>
                  <input type="hidden" name="f_comb" id="f_comb" value="<?= $prefill_comb ?>">
                </div>

                <div class="col-4">
                  <i class="comb__btn bi bi-dash-square fs-3" data-combbtn="mins"></i>
                  <i class="comb__btn bi bi-plus-square fs-3" data-combbtn="plus"></i>
                </div>

              </div>

              <output class="comb__star__output"></output>

            </div>

          </div> <!-- end of .form__bottom -->


          <div class="form__submit mb-3 p-3 text-center">
            <button class="btn btn-outline-dark" type="submit">Enregistrer</button>
          </div>



        </form>

      </div>

    </section>

    <!-- T*T -- CREW -->
    <section id="crew" class="my-3">

      <div class="container">

        <p>Votre équipage compte actuellement <?= count($memberList) ?> membres.</p>

        <div class="crew__wrapper">

          <?php foreach ($memberList as $m) { ?>
            <div class="row crew__member rounded rounded-3 p-1 mx-1 my-3">

              <div class="col-2 d-flex align-items-center">
                <img class="avat_img" src="public/icons/<?= $m['memIcon'] ?>" alt="">
              </div>

              <div class="col-8">

                <div class="row">

                  <!-- A -->
                  <div class="col-12 col-lg-6">
                    <!-- name -->
                    <h3><?= $m['memName'] ?></h3>

                    <!-- signs -->
                    <p><?= $m['memSign'] ?></p>
                  </div>

                  <!-- B -->
                  <div class="col-12 col-lg-6">
                    <!-- navg -->
                    <div class="d-flex align-items-center my-1">
                      <span class="skill skill__navg"></span>
  
                      <?php for ($i = 1; $i <= $m['memNavg']; $i++) { ?>
                        <i class="skill__star bi bi-star-fill mx-1"></i>
                      <?php } ?>
                    </div>
                                        
                    <!-- comb -->
                    <div class="d-flex align-items-center my-1">
                      <span class="skill skill__comb"></span>
  
                      <?php for ($i = 1; $i <= $m['memComb']; $i++) { ?>
                        <i class="skill__star bi bi-star-fill mx-1"></i>
                      <?php } ?>
                    </div>

                  </div>

                </div>
              </div>

              <div class="col-2 card__commands d-flex flex-column flex-lg-row justify-content-center align-items-center">

                <a class="btn btn-outline-secondary m-1 command__btn edit__btn" href="index.php?action=edit&id=<?= $m['memId'] ?>">
                  <!-- <i class="bi bi-pencil-square"></i> -->
                </a>

                <a class="btn btn-outline-secondary m-1 command__btn delete__btn" data-id="<?= $m['memId'] ?>" data-name="<?= $m['memName'] ?>" data-bs-toggle="modal" data-bs-target="#deleteModal">
                  <!-- <i class="bi bi-trash3 text-danger"></i> -->
                </a>
              </div>

            </div>


          <?php } ?>

        </div>

        <button id="addMember" type="button" class="btn btn-outline-secondary">Ajouter un membre</button>

      </div>


    </section>





  </main>

  <!-- MK -- FOOTER -->
  <footer class="p-3">
    <div class="container">
      <p class="text-center">doctypematt &copy; 2022</p>
    </div>
  </footer>


  <script src="public/js/main.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>


</body>

</html>